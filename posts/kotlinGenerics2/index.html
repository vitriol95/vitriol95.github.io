<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="코틀린 지네릭스 - 2" /><meta property="og:locale" content="ko" /><meta name="description" content="In Out" /><meta property="og:description" content="In Out" /><link rel="canonical" href="https://vitriol95.github.io/posts/kotlinGenerics2/" /><meta property="og:url" content="https://vitriol95.github.io/posts/kotlinGenerics2/" /><meta property="og:site_name" content="Vitriol" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-10-02T13:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="코틀린 지네릭스 - 2" /><meta name="twitter:site" content="@" /><meta name="google-site-verification" content="QsbP4NOwVkaE8CnHpYOl-qNGhxB9m1RbsrBEefA92ao" /> <script type="application/ld+json"> {"headline":"코틀린 지네릭스 - 2","dateModified":"2021-10-02T13:00:00+09:00","datePublished":"2021-10-02T13:00:00+09:00","description":"In Out","url":"https://vitriol95.github.io/posts/kotlinGenerics2/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://vitriol95.github.io/posts/kotlinGenerics2/"},"@context":"https://schema.org"}</script><title>코틀린 지네릭스 - 2 | Vitriol</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Vitriol"><meta name="application-name" content="Vitriol"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-WSY4XYN711"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-WSY4XYN711'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/profile.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Vitriol</a></div><div class="site-subtitle font-italic">기억을 적는 시간</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/vitriol95" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['vitriol951','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>코틀린 지네릭스 - 2</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>코틀린 지네릭스 - 2</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> vitriol </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Oct 2, 2021, 1:00 PM +0900" prep="on" > Oct 2, 2021 <i class="unloaded">2021-10-02T13:00:00+09:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1560 words">8 min</span></div></div><div class="post-content"><h2 id="in-out">In Out</h2><p>지난 내용을 요약하면 in / out으로 지네릭에 flexibility를 주는 것을 보았다. projected된 지네릭 파라미터를 읽고싶을 때에는 out을 사용하고, 이를 내부에서 사용하고 싶을때에는 in이라는 키워드를 사용하면 된다.</p><h4 id="하지만-이런-궁금증도-든다-이-둘을-동시에-사용하는-방법이-있을까">하지만 이런 궁금증도 든다, 이 둘을 동시에 사용하는 방법이 있을까??</h4><p>가장 먼저 생각할 수 있는 방법으로는 projected parameter를 Read, Write를 할 수 있는 각각의 out, in 키워드가 붙은 지네릭 클래스를 만들고 이둘을 상속하는 것이 있다.</p><p><br /> 하지만 좀 더 일반적이면서, 권장하는 방법을 코틀린에서는 제공한다. 전에 이야기 한 두가지 원칙을 중심으로 보자</p><ul><li>ㄱ. A subtype must accept at least the same range of types as its supertype declares.<li>ㄴ. A subtype must return at most the same range of types as its supertype declares.</ul><h2 id="supergroup">SuperGroup</h2><h4 id="앞서-이야기한-groupt가-모든-projected-parameter를-받고-리턴하기-위해서는-앞선-두-원칙을-지켜야한다">앞서 이야기한 <code class="language-plaintext highlighter-rouge">Group&lt;T&gt;</code>가 모든 projected parameter를 받고, 리턴하기 위해서는 앞선 두 원칙을 지켜야한다.</h4><blockquote><p>이를 SuperGroup이라고 하겠다.</p></blockquote><p>그렇다면, SuperGroup의 모양은 이렇게 생겨야 할 것이다.</p><div class="language-kotlin highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kd">interface</span> <span class="nc">SuperGroup</span> <span class="p">{</span>
    <span class="k">fun</span> <span class="nf">insert</span><span class="p">(</span><span class="n">item</span><span class="p">:</span> <span class="nc">Nothing</span><span class="p">)</span> <span class="c1">// Nothing은 모든 클래스의 하위타입에 해당하므로 확장이 가능하다.</span>
    <span class="k">fun</span> <span class="nf">fetch</span><span class="p">():</span> <span class="nc">Any</span><span class="p">?</span> <span class="c1">// Any?의 경우 모든 클래스의 상위 타입에 해당하므로 subtype으로 좁히는 것이 가능하다.</span>
<span class="p">}</span>
</pre></table></code></div></div><blockquote><p>이 인터페이스를 Group이 상속해서 사용해도 괜찮을까? 안타깝게도 되지 않는다.. 코틀린에서는 지네릭이 아닌 normal class / interface의 상속에서 contravariant argument types를 지원하지 않는다.</p></blockquote><h4 id="마치-다음과-같은-상황이다">마치 다음과 같은 상황이다.</h4><ul><li>전제조건<ul><li>A가 B의 상위 클래스<li>Super가 Sub의 상위 클래스</ul></ul><div class="language-kotlin highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">open</span> <span class="kd">class</span> <span class="nc">Super</span> <span class="p">{</span>
    <span class="k">open</span> <span class="k">fun</span> <span class="nf">execute</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nc">B</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">Sub</span> <span class="p">:</span> <span class="nc">Super</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">execute</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="nc">A</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>super에서 sub으로 내려가면서, override fun의 argument는 super로 가고있기에 다음과 같은 상황이 contravariant argument에 해당한다.</p><blockquote><p>이를 금지해둔 이유는 오버로딩과의 혼선을 피하기 위해서이다. 따라서, Sub 클래스의 execute fun에서 override 키워드를 지우면 컴파일 에러도 뱉지 않는다.</p></blockquote><h4 id="그렇다면-어떻게-해야하는가--일반-클래스인터페이스는-불가하므로-지네릭을-써야한다">그렇다면 어떻게 해야하는가? –&gt; 일반 클래스/인터페이스는 불가하므로 지네릭을 써야한다.</h4><p>동시에, in과 out 스키마를 합치시켜보면 두가지 옵션이 나올 수 있다.</p><ul><li>In-projections set the return types to Any?<li>Out-projections set the argument types to Nothing</ul><p>이를 도식화 해 둔것이 아래의 그림에 해당한다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/kotlin_study/1.JPG" /></p><p>즉, <code class="language-plaintext highlighter-rouge">Group&lt;in Nothing&gt;</code> 혹은 <code class="language-plaintext highlighter-rouge">Group&lt;out Any?&gt;</code>으로 사용할 경우 우리가 원하는 목표를 이룰 수 있다.</p><h2 id="star-projections">Star-Projections</h2><h4 id="하지만-코틀린에서는-더-나은-관용적인-방법을-제시한다-이것이-star-projections이다-기존-방법들을-살펴보자">하지만 코틀린에서는 더 나은 관용적인 방법을 제시한다. 이것이 star projections이다. 기존 방법들을 살펴보자.</h4><ol><li><code class="language-plaintext highlighter-rouge">Group&lt;in Nothing&gt;</code></ol><div class="language-kotlin highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kd">interface</span> <span class="nc">Group</span><span class="p">&lt;</span><span class="nc">T</span> <span class="p">:</span> <span class="nc">Animal</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="k">fun</span> <span class="nf">insert</span><span class="p">(</span><span class="n">member</span><span class="p">:</span> <span class="nc">T</span><span class="p">):</span> <span class="nc">Unit</span>
  <span class="k">fun</span> <span class="nf">fetch</span><span class="p">():</span> <span class="nc">T</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">readIn</span><span class="p">(</span><span class="n">group</span><span class="p">:</span> <span class="nc">Group</span><span class="p">&lt;</span><span class="k">in</span> <span class="nc">Nothing</span><span class="p">&gt;)</span> <span class="p">{</span>
  <span class="kd">val</span> <span class="py">item</span> <span class="p">=</span> <span class="n">group</span><span class="p">.</span><span class="nf">fetch</span><span class="p">()</span>
<span class="p">}</span>
</pre></table></code></div></div><p>readIn 함수를 통해 얻은 item은 어떠한 타입을 지니게 될까. 우리는 T: Animal 이라는 상한선을 주었기 때문에, 최소 Animal보다 제너럴한 타입이 올 것이라 예측할 수 있다. 따라서 코틀린이 이 item을 Animal이라고 예측해주기를 바란다.</p><h4 id="하지만-실제로는-그렇지-않다-코틀린은-item의-타입을-여전히-any로-유지하게-된다">하지만 실제로는 그렇지 않다, 코틀린은 item의 타입을 여전히 Any?로 유지하게 된다.</h4><ol><li><code class="language-plaintext highlighter-rouge">Group&lt;out Animal&gt;</code> (상한선을 Any?에서 Animal로 제한)</ol><div class="language-kotlin highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">fun</span> <span class="nf">readOut</span><span class="p">(</span><span class="n">group</span><span class="p">:</span> <span class="nc">Group</span><span class="p">&lt;</span><span class="k">out</span> <span class="nc">Animal</span><span class="p">&gt;)</span> <span class="p">{</span>
  <span class="kd">val</span> <span class="py">item</span> <span class="p">=</span> <span class="n">group</span><span class="p">.</span><span class="nf">fetch</span><span class="p">()</span>
<span class="p">}</span>
</pre></table></code></div></div><p>out projection은 어떻게 될까. 이 경우에는 item의 타입을 정확히 Animal로 가져다 주게 된다. 즉, item.walk()등의 Animal의 함수들을 사용할 수 있게 되는 것이다.</p><ol><li><code class="language-plaintext highlighter-rouge">Group&lt;*&gt;</code> StarProjections</ol><div class="language-kotlin highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">fun</span> <span class="nf">readStar</span><span class="p">(</span><span class="n">group</span><span class="p">:</span> <span class="nc">Group</span><span class="p">&lt;</span><span class="err">*</span><span class="p">&gt;)</span> <span class="p">{</span>
  <span class="kd">val</span> <span class="py">item</span> <span class="p">=</span> <span class="n">group</span><span class="p">.</span><span class="nf">fetch</span><span class="p">()</span>
<span class="p">}</span>
</pre></table></code></div></div><p>star projections를 사용한 경우, 앞선 2와 같이 item의 타입은 Animal로 가져다 주게 된다. 아직까진 2와 3방법에서 큰 차이는 없어보인다.</p><h4 id="만약-groupt의-제한을-좀-더-줄여보면-어떻게-될까-animal---dog">만약, <code class="language-plaintext highlighter-rouge">Group&lt;T&gt;</code>의 제한을 좀 더 줄여보면 어떻게 될까?? (:Animal -&gt; :Dog)</h4><div class="language-kotlin highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kd">interface</span> <span class="nc">Group</span><span class="p">&lt;</span><span class="nc">T</span> <span class="p">:</span> <span class="nc">Dog</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="k">fun</span> <span class="nf">insert</span><span class="p">(</span><span class="n">member</span><span class="p">:</span> <span class="nc">T</span><span class="p">):</span> <span class="nc">Unit</span>
  <span class="k">fun</span> <span class="nf">fetch</span><span class="p">():</span> <span class="nc">T</span>
<span class="p">}</span>
</pre></table></code></div></div><ol><li>1번의 경우에는 그대로 item의 타입을 Any?로 유지하게 된다.<li>2번의 경우 컴파일 에러를 뱉는다. Dog이 Animal보다 하위타입에 해당하기 때문이다.<ul><li>따라서 우리는 readOut의 arg를 <code class="language-plaintext highlighter-rouge">Group&lt;out Dog&gt;</code>으로 수정해주어야 한다.</ul><li>3번의 경우 컴파일이 진행되며 item의 타입은 Dog으로 매칭된다. 👍<blockquote><p>이제 왜 얘를 써야하는지 알거같다.</p></blockquote></ol><h2 id="는-any와-어떻게-다른가"><code class="language-plaintext highlighter-rouge">&lt;*&gt;</code>는 <code class="language-plaintext highlighter-rouge">&lt;Any?&gt;</code>와 어떻게 다른가.</h2><h4 id="arrayany와-array의-예시를-보자"><code class="language-plaintext highlighter-rouge">Array&lt;Any?&gt;</code>와 <code class="language-plaintext highlighter-rouge">Array&lt;*&gt;</code>의 예시를 보자</h4><div class="language-kotlin highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">fun</span> <span class="nf">acceptAnyArray</span><span class="p">(</span><span class="n">array</span><span class="p">:</span> <span class="nc">Array</span><span class="p">&lt;</span><span class="nc">Any</span><span class="err">?</span><span class="p">&gt;)</span> <span class="p">{}</span>
<span class="k">fun</span> <span class="nf">acceptStarArray</span><span class="p">(</span><span class="n">array</span><span class="p">:</span> <span class="nc">Array</span><span class="p">&lt;</span><span class="err">*</span><span class="p">&gt;)</span> <span class="p">{}</span>

<span class="kd">val</span> <span class="py">arrayOfStrings</span> <span class="p">=</span> <span class="nf">arrayOf</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span> <span class="s">"Kotlin"</span><span class="p">,</span> <span class="s">"World"</span><span class="p">)</span>

<span class="nf">acceptAnyArray</span><span class="p">(</span><span class="n">arrayOfStrings</span><span class="p">)</span>  <span class="c1">// Compiler error = Required: Array&lt;Any?&gt; Found: Array&lt;String&gt;</span>
<span class="nf">acceptStarArray</span><span class="p">(</span><span class="n">arrayOfStrings</span><span class="p">)</span>
</pre></table></code></div></div><p>어찌 보면 당연한 결과이다. Array&lt;Any?&gt;는 Array<String>의 supertype이 아니기 때문이다.</String></p><h4 id="하지만-star-projections시에는-컴파일이-된다-앞서-살펴-보았듯이-지네릭의-동작원리를-가져오기-때문이다">하지만 star-projections시에는 컴파일이 된다. 앞서 살펴 보았듯이, 지네릭의 동작원리를 가져오기 때문이다.</h4><p><br /></p><h4 id="재미있는-실험이-하나-더-있는데-array가-아니라-list로-실험할-경우-두가지-모두-제대로-컴파일이-된다">재미있는 실험이 하나 더 있는데, Array가 아니라 List로 실험할 경우 두가지 모두 제대로 컴파일이 된다.</h4><div class="language-kotlin highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">fun</span> <span class="nf">acceptAnyList</span><span class="p">(</span><span class="n">list</span><span class="p">:</span> <span class="nc">List</span><span class="p">&lt;</span><span class="nc">Any</span><span class="err">?</span><span class="p">&gt;)</span> <span class="p">{}</span>
<span class="k">fun</span> <span class="nf">acceptStarList</span><span class="p">(</span><span class="n">list</span><span class="p">:</span> <span class="nc">List</span><span class="p">&lt;</span><span class="err">*</span><span class="p">&gt;)</span> <span class="p">{}</span>
<span class="kd">val</span> <span class="py">listOfStrings</span><span class="p">:</span> <span class="nc">List</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;</span> <span class="p">=</span> <span class="nf">listOf</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">,</span> <span class="s">"Kotlin"</span><span class="p">,</span> <span class="s">"World"</span><span class="p">)</span>
<span class="nf">acceptAnyList</span><span class="p">(</span><span class="n">listOfStrings</span><span class="p">)</span>
<span class="nf">acceptStarList</span><span class="p">(</span><span class="n">listOfStrings</span><span class="p">)</span>
</pre></table></code></div></div><p>왜 List는 되는 것일까? –&gt; 지네릭이 숨어있다는 것이다. 즉, Standard Library인 Array의 정의와 달리 List의 경우에는 declaration-site에서 지네릭이 정의가 되어있다. 이는 실제 코드를 까보면 어렵지 않게 찾을 수 있다(이는 자바에서 array가 공변타입인것과 같다).</p><h2 id="참고자료">참고자료</h2><ul><li><a href="https://typealias.com/guides/star-projections-and-how-they-work/">https://typealias.com/guides/star-projections-and-how-they-work/</a><li><a href="https://kotlinlang.org/docs/generics.html#star-projections">https://kotlinlang.org/docs/generics.html#star-projections</a><li><a href="https://typealias.com/guides/ins-and-outs-of-generic-variance/">https://typealias.com/guides/ins-and-outs-of-generic-variance/</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/kotlin/'>Kotlin</a>, <a href='/categories/kotlin-study/'>kotlin_study</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/kotlin/" class="post-tag no-text-decoration" >kotlin</a> <a href="/tags/jvm/" class="post-tag no-text-decoration" >jvm</a> <a href="/tags/generics/" class="post-tag no-text-decoration" >generics</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=코틀린 지네릭스 - 2 - Vitriol&url=https://vitriol95.github.io/posts/kotlinGenerics2/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=코틀린 지네릭스 - 2 - Vitriol&u=https://vitriol95.github.io/posts/kotlinGenerics2/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=코틀린 지네릭스 - 2 - Vitriol&url=https://vitriol95.github.io/posts/kotlinGenerics2/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/batchbase1/">스프링 배치 - 1 스프링 배치란?</a><li><a href="/posts/batchbase2/">스프링 배치 - 2 DB 스키마에 대한 이해</a><li><a href="/posts/batchbase3/">스프링 배치 - 3 도메인 뜯어보기(JOB)</a><li><a href="/posts/batchbase4/">스프링 배치 - 4 도메인 뜯어보기(STEP)</a><li><a href="/posts/batchbase5/">스프링 배치 - 5 청크 지향 처리</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/python3/">python3</a> <a class="post-tag" href="/tags/boj/">boj</a> <a class="post-tag" href="/tags/problem/">problem</a> <a class="post-tag" href="/tags/%EB%B0%B1%EC%A4%80/">백준</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/springboot/">springboot</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring-mvc/">spring mvc</a> <a class="post-tag" href="/tags/springframework/">springframework</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/kotlinGenerics1/"><div class="card-body"> <span class="timeago small" > Oct 2, 2021 <i class="unloaded">2021-10-02T12:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>코틀린 지네릭스 - 1</h3><div class="text-muted small"><p> Variant in Java 가장 먼저 다음의 상황을 가정해 보자. 1 - Animal이라는 클래스를 상속한 Dog이라는 클래스가 존재한다. 2 - Group 라는 지네릭 인터페이스가 존재하며, 다음과 같은 추상 메서드가 존재한다 void insert(T item) T fetch() 이를 사용...</p></div></div></a></div><div class="card"> <a href="/posts/kotlinStudy1/"><div class="card-body"> <span class="timeago small" > Oct 2, 2021 <i class="unloaded">2021-10-02T11:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>코틀린 var, val 그리고 inline</h3><div class="text-muted small"><p> 인터페이스 상에서의 var과 val의 차이 코틀린에서 ‘var속성과 val속성을 사용한다.’ 라는 것은 결국 ‘속성 처럼’ 보이는 문법을 쓰게 해주는 getter나 setter를 만들어주는 것이다. 또한 이러한 특징은 추상 클래스나 인터페이스에서 추상 수준의 var이나 val을 사용할 수 있게 해준다. 그렇다면 다음과 같은 선언을 보자. 이번 프...</p></div></div></a></div><div class="card"> <a href="/posts/kotlinCompanionObject/"><div class="card-body"> <span class="timeago small" > Oct 4, 2021 <i class="unloaded">2021-10-04T13:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>코틀린의 CompanionObject vs 자바 Static</h3><div class="text-muted small"><p> Kotlin + Companion Object 출처 출처2 코틀린에서의 Companion Object는 자바의 Static과 엄연히 다르다. 그렇다면 왜 기존의 Static을 쓰지 않고 코틀린에와서 이렇게 넘어오게 됬는지, 그 연유를 찾아 올라가면 알 수 있지 않을까? 자바의 Static &amp; 코틀린의 Object 자바에서의 static...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/kotlinGenerics1/" class="btn btn-outline-primary" prompt="Older"><p>코틀린 지네릭스 - 1</p></a> <a href="/posts/mysql2/" class="btn btn-outline-primary" prompt="Newer"><p>DB의 트랜잭션 (2) 트랜잭션의 격리성, LOCK</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/username">vitriol</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/python3/">python3</a> <a class="post-tag" href="/tags/boj/">boj</a> <a class="post-tag" href="/tags/problem/">problem</a> <a class="post-tag" href="/tags/%EB%B0%B1%EC%A4%80/">백준</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/springboot/">springboot</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring-mvc/">spring mvc</a> <a class="post-tag" href="/tags/springframework/">springframework</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://vitriol95.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
