<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="도커의 레이어저장, 네트워크" /><meta property="og:locale" content="ko" /><meta name="description" content="DOCKER" /><meta property="og:description" content="DOCKER" /><link rel="canonical" href="https://vitriol95.github.io/posts/docker/" /><meta property="og:url" content="https://vitriol95.github.io/posts/docker/" /><meta property="og:site_name" content="Vitriol" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-10-03T12:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="도커의 레이어저장, 네트워크" /><meta name="twitter:site" content="@" /><meta name="google-site-verification" content="QsbP4NOwVkaE8CnHpYOl-qNGhxB9m1RbsrBEefA92ao" /> <script type="application/ld+json"> {"headline":"도커의 레이어저장, 네트워크","dateModified":"2021-10-03T12:00:00+09:00","datePublished":"2021-10-03T12:00:00+09:00","description":"DOCKER","url":"https://vitriol95.github.io/posts/docker/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://vitriol95.github.io/posts/docker/"},"@context":"https://schema.org"}</script><title>도커의 레이어저장, 네트워크 | Vitriol</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Vitriol"><meta name="application-name" content="Vitriol"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-WSY4XYN711"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-WSY4XYN711'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/profile.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Vitriol</a></div><div class="site-subtitle font-italic">기억을 적는 시간</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/vitriol95" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['vitriol951','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>도커의 레이어저장, 네트워크</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>도커의 레이어저장, 네트워크</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> vitriol </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Oct 3, 2021, 12:00 PM +0900" prep="on" > Oct 3, 2021 <i class="unloaded">2021-10-03T12:00:00+09:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2463 words">13 min</span></div></div><div class="post-content"><h2 id="docker">DOCKER</h2><h3 id="도커의-레이어-저장방식">도커의 레이어 저장방식</h3><p>도커 이미지는 컨테이너 실행을 위한 정보들을 가지고 있기에, 용량이 수백메가에 이른다. 만약 기존 이미지에 파일 하나를 추가했다고 이를 다시 다운로드 한다면, 매우 비 효율적이라 볼 수 있다. <br /> 도커는 이런 문제를 해결하기 위해서 layer라는 개념을 사용하고, 유니온 파일 시스템(UFS)을 이용해 여러개의 레이어를 하나의 파일시스템으로 사용하게 해준다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/docker/1.png" /></p><p><a href="https://subicura.com/2017/01/19/docker-guide-for-beginners-1.html">출처</a> <br /> 위 그림이 적절한 예시가 된다. webapp이미지를 nginx 이미지 기반으로 만들었다면 A+B+C+nginx+source 레이어로 구성된다. 이때 webapp의 소스를 수정하게 되면 A,B,C,nginx 레이어를 제외한 새로운 source 레이어만 다운받으면 되기 때문에 굉장히 효율적인 이미지 관리가 가능하다.</p><h4 id="ufs">UFS?</h4><p>UFS는 여러개의 파일 시스템을 하나의 파일 시스템에 마운트 하는 기능이다. 여러개의 파일 시스템을 하나로 합치다보면, 중복되는 파일이 존재하는데 UFS에서는 나중에 마운트된 파일로 overlay 하게된다.</p><blockquote><p>도커 이미지에서 레이어는 개념적으로 각각의 파일 시스템을 겹쳐 놓은 형태라 할 수 있다.</p></blockquote><h4 id="궁금증-1---이미지를-공유할-경우">궁금증 1 - 이미지를 공유할 경우</h4><p>하나의 이미지로 여러 컨테이너를 독립적으로 사용할 수 있다. 이때, 같은 이미지에서 생성된 컨테이너들이 동일한 파일 시스템을 공유하고 있다면, 어떻게 컨테이너가 독립적으로 실행 될 수 있을까.</p><h4 id="해답-1---cow-전략">해답 1 - CoW 전략</h4><p>UFS에서는 위와 같은 상황을 방지하기 위해 Copy on write라는 전략을 사용한다. 기존 레이어위에 새로운(상위) 레이어가 쌓일 경우, 하위 레이어는 읽기 전용(R/O)상태가 된다. 또한, 상위에서 하위에 쓰기 작업을 수행할 경우엔 하위 레이어를 복사하여 사용하기에, 아무런 영향을 주지 않고 진행할 수 있다.</p><p><br /> 도커에서 레이어는 크게 컨테이너(상위)레이어와 이미지(하위)레이어로 구분이 된다. 컨테이너가 파일 시스템에 쓰기 작업을 수행할 경우, 실질적으로는 하위 레이어의 복사본에 해당 작업을 수행하기 때문에 서로 다른 컨테이너가 하위 레이어를 공유하고 있어도 서로 독립적인 파일 시스템 운용이 가능해진다.</p><p><br /> 실제로 컨테이너를 생성할 때 기존 이미지 레이어 위에 읽기/쓰기 레이어를 추가하는 것을 확인할 수 있다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/docker/2.png" /></p><p>이렇게 도커에서 관리되는 모든 레이어와 관련된 정보는 호스트 파일시스템 내의 /var/lib/docker폴더에 저장된다.</p><blockquote><p>이 영역을 Docker area 혹은 Backing Filesystem 이라고 부른다.</p></blockquote><h4 id="해답-1-이어서---docker-storage-driver">해답 1 이어서 - Docker Storage Driver</h4><p>컨테이너 레이어에서 실제로 데이터를 쓰는 작업을 수행한다. 작성된 파일은 컨테이너가 삭제 되면 함께 제거되며, 컨테이너 레이어에서는 파일을 읽고 쓰는 작업은 호스트 머신에서 작성하는 것 보다 느리다(만약 써야할 작업이 많다면 볼륨 마운트하여 사용하자).</p><blockquote><p>대표적으로 생각나는건 DB나.. 로그 파일.. 메시지큐 같은것이 있겠다.</p></blockquote><p><br /> Docker storage Driver는 인터페이스로, 여러 구현 방식들이 존재하지만 CoW전략 기반의 implementation만 알아보겠다.</p><ul><li>컨테이너를 실행하기 위한 기반 이미지 레이어를 찾는다. 상위 -&gt; 하위 레이어 순으로 탐색을 하며 중간 단계 레이어를 찾으면 이를 재사용하여 이미지 빌드 과정을 최적화 한다.<li>해당 레이어를 컨테이너 레이어의 파일 시스템으로 복사하게 된다 (copy - up 과정)<li>이후, 컨테이너에서 이루어지는 쓰기 작업은 컨테이너 레이어에서 수행되며 이미지 레이어에는 아무 영향을 주지 않는다.<blockquote><p>드라이버에 따라 차이는 있지만 copy_up연산의 오버헤드가 크게 발생할 수 있다. 파일 시스템이 복잡하고 용량이 클때이다.</p></blockquote></ul><h3 id="도커-네트워크의-구조---network-net-">도커 네트워크의 구조 ( -network –net )</h3><p>새로운 컨테이너를 실행시켜 보고, default bridge 네트워크를 확인해 보자</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/docker/3.png" /></p><p>아무런 네트워크 설정을 주지않고 새로운 컨테이너를 run 시켰을 때의 모습이다. 다음과 같은 사실을 알 수 있다.</p><ul><li>내부적으로 게이트웨이 Ip이후의 Ip를 할당받게 된다<li>기본적으로 default 네트워크 브릿지에 연결된다.</ul><p>오호.. 그러면 방금 실행시켰던 컨테이너 내부의 네트워크 인터페이스를 확인해보자 <code class="language-plaintext highlighter-rouge">docker exec -it {} ifconfig</code></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/docker/4.png" /></p><p>아까의 ip가 할당되어 있는 eth0과 lo 인터페이스가 존재했다. 이 서브넷들은 도커 컨테이너 내부에서 할당하는 대역이다. 즉 바깥과 통신하려면 무언가가 필요하게 된다.</p><h4 id="궁금증-2---어떻게-바깥-네트워크-대역과-통신이-가능할까">궁금증 2 - 어떻게 바깥 네트워크 대역과 통신이 가능할까</h4><p>통신이 가능하게 하려면 각 컨테이너의 외부 연결을 위해 가상 인터페이스를 생성해 주어야 한다. 하지만 생성해주지 않아도 네트워크는 잘 되었다. 어떻게 이게 가능한걸까 궁금했다.</p><h4 id="해답-2---host">해답 2 - host</h4><p>다시, 이번엔 host로 들어와서 인터페이스를 확인해보자.</p><blockquote><p>원격 서버에서 ifconfig명령을 치면 바로 실행이 되지 않고, 찾아서 써야한다. 나같은 경우 net-tools를 설치하여 /usr/sbin/ifconfig 에 존재했다</p></blockquote><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/docker/5.png" /></p><p>아까와 비교해보자면 docker0과 veth~가 있었다. 이 둘의 역할이 핵심이 될 것이다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/docker/6.png" /></p><p>위의 그림이 두 인터페이스의 역할을 잘 설명해준다. 정리해 보자면, 컨테이너를 생성할때 호스트가 자동으로 가상 인터페이스를 생성해준다. 이 인터페이스의 이름이 veth(virtual ethernet)에 해당한다.</p><p><br /> 그리고 docker0이라는 ‘Bridge’도 존재하게 되는데, 이 인터페이스는 각 veth와 바인딩 되어서 호스트 외부 인터페이스와 이어주는 역할을 한다. 이 역시 확인해 볼 수 있다. 이더넷 브리지 명령어로 docker0를 확인해 보자.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/docker/7.png" /></p><p>오.. 제대로 바인딩 해주고 있었다. 결국 docker0이라는 브리지가 veth 가상 인터페이스의 호스트와 eth0 인터페이스를 이어주는 중간 다리 역할을 해주고 있었다.</p><h4 id="해답-2---이외-네트워크-종류">해답 2 - 이외 네트워크 종류</h4><ol><li>브리지 네트워크 + 사용자 정의 브리지 네트워크</ol><p><code class="language-plaintext highlighter-rouge">docker network ls</code>를 통해 기본적으로 3가지 네트워크가 존재함을 알수있다(‘bridge, host, none’) 여기서 bridge는 앞서 확인 했듯이, 컨테이너 생성시 docker0브리지를 자동으로 연결하는데 활용한다.</p><blockquote><p>당연히 아무런 설정없이 컨테이너를 생성하면 docker0 브리지를 사용하게 된다.</p></blockquote><p><br /> 새롭게 네트워크를 생성해보고, 다시 ip옵션을 통해 테스트를 해보자. <br /></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>docker network create --driver bridge newbridge
docker run -d -p 80:80 docker/getting-started --net newbridge
</pre></table></code></div></div><p><br /></p><p>그리고, 다시 한번 호스트 네트워크 인터페이스를 확인해보자(ifconfig)</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/docker/8.png" /></p><p>이처럼 새로운 브리지 형태의 네트워크 대역을 가진 인터페이스가 생성되었다. (172.18.0.1) 이러한 네트워크는 (dis)connect로 간편하게 붙혔다 뗄 수 있으며 –subnet, –ip-range, –gateway 옵션을 따로주어 생성할 수도 있다.</p><hr /><ol><li>호스트 네트워크</ol><p>이번엔 호스트 네트워크를 이용해 실행해 보자 <code class="language-plaintext highlighter-rouge">docker run -it --net host docker/getting-started ifconfig</code> <br /></p><p>이때 찍었던 ifconfig와 host에서 ifconfig를 찍어보면 똑같다…(호스트 머신의 네트워크 인터페이스와 내용이 일치한다) 이 점은 되게 신기했다.</p><blockquote><p>이렇게 되면, 호스트 네트워크를 사용하는 컨테이너에서 웹 서버를 구동한다면, 호스트 IP와 컨테이너의 아파치 포트인 80번으로 바로 접근이 가능하겠다.</p></blockquote><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/docker/9.png" /></p><p>마치 이런상황이 되는 것이다.</p><hr /><ol><li>None 네트워크</ol><p><code class="language-plaintext highlighter-rouge">docker run -it --net none docker/getting-started ifconfig</code></p><p>이때 lo인터페이스 외에는 존재하지 않는다. 즉 외부와의 단절을 의미한다.</p><hr /><ol><li>Container 네트워크</ol><p>당연히 컨테이너 끼리의 네트워크를 만들어 낼 수 있다. 이 점은 예전에 사용해 보았었다. <code class="language-plaintext highlighter-rouge">docker run -itd --net container:{containername} ifconfig</code></p><p><br /></p><p>이렇게 되면 서로의 ifconfig를 찍어보았을 때 동일한 lo와 eth0를 갖게된다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/docker/10.png" /></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/devops/'>DevOps</a>, <a href='/categories/docker/'>docker</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/docker/" class="post-tag no-text-decoration" >docker</a> <a href="/tags/layer/" class="post-tag no-text-decoration" >layer</a> <a href="/tags/linux/" class="post-tag no-text-decoration" >linux</a> <a href="/tags/network/" class="post-tag no-text-decoration" >network</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=도커의 레이어저장, 네트워크 - Vitriol&url=https://vitriol95.github.io/posts/docker/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=도커의 레이어저장, 네트워크 - Vitriol&u=https://vitriol95.github.io/posts/docker/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=도커의 레이어저장, 네트워크 - Vitriol&url=https://vitriol95.github.io/posts/docker/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/batchbase1/">스프링 배치 - 1 스프링 배치란?</a><li><a href="/posts/batchbase2/">스프링 배치 - 2 DB 스키마에 대한 이해</a><li><a href="/posts/batchbase3/">스프링 배치 - 3 도메인 뜯어보기(JOB)</a><li><a href="/posts/batchbase4/">스프링 배치 - 4 도메인 뜯어보기(STEP)</a><li><a href="/posts/batchbase5/">스프링 배치 - 5 청크 지향 처리</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/python3/">python3</a> <a class="post-tag" href="/tags/boj/">boj</a> <a class="post-tag" href="/tags/problem/">problem</a> <a class="post-tag" href="/tags/%EB%B0%B1%EC%A4%80/">백준</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/springboot/">springboot</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring-mvc/">spring mvc</a> <a class="post-tag" href="/tags/springframework/">springframework</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/dockerCliend/"><div class="card-body"> <span class="timeago small" > Oct 4, 2021 <i class="unloaded">2021-10-04T12:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>도커의 Host - Client 구조</h3><div class="text-muted small"><p> Docker 원격 이용 Docker는 Sserver-Client 구조의 어플리케이션이라고 하지만, 이를 의식하며 써본적은 드물다. 이번엔 Server-Client가 떨어져있어도 REST API를 이용해 원격으로 이용 을 직접 해보며 익혀보자. 사실, 기존에 사용했던 docker ps와 같은 명령어도 결국은 docker서버에 GET /~~/con...</p></div></div></a></div><div class="card"> <a href="/posts/dockerFilecmd/"><div class="card-body"> <span class="timeago small" > Oct 4, 2021 <i class="unloaded">2021-10-04T13:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>도커의 Cmd vs EntryPoint</h3><div class="text-muted small"><p> DockerFile Dockerfile을 쓰며 가장 헷갈렸던 점은 CMD와 ENTRYPOINT의 차이에 해당했다. 이 차이점을 느껴보자. CMD vs ENTRYPOINT 둘다 docker container가 실행될때 실행되어야 할 커맨드들을 지정할 수 있다. 먼저 요약해보자면, ENTRYPOINT는 컨테이너가 시작될때 항상 실행될 명령어를 의...</p></div></div></a></div><div class="card"> <a href="/posts/testContainer/"><div class="card-body"> <span class="timeago small" > Oct 1, 2021 <i class="unloaded">2021-10-01T11:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>TestContainers</h3><div class="text-muted small"><p> 서론 테스트 환경은 프로젝트 설정에서 작지 않은 부분을 차지하고 있고, TDD의 등장으로 그 중요성이 커지고 있는 것이 사실이다. 이번 프로젝트에서는 테스트에 있어 꽤 유명한 툴인 Test Container를 사용해보고, 이에 대한 리뷰 및 의견을 적어보려한다. 왜 사용하는가? 테스트 환경을 만드는 과정에서 신경써야할 부분은 여러가지가 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/mysql2/" class="btn btn-outline-primary" prompt="Older"><p>DB의 트랜잭션 (2) 트랜잭션의 격리성, LOCK</p></a> <a href="/posts/elk/" class="btn btn-outline-primary" prompt="Newer"><p>elk의 기본구조와 사용법</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/username">vitriol</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/python3/">python3</a> <a class="post-tag" href="/tags/boj/">boj</a> <a class="post-tag" href="/tags/problem/">problem</a> <a class="post-tag" href="/tags/%EB%B0%B1%EC%A4%80/">백준</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/springboot/">springboot</a> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring-mvc/">spring mvc</a> <a class="post-tag" href="/tags/springframework/">springframework</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://vitriol95.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
